<table class="table table-striped">

  <tr>
    <th>文章標題</th>
    <th>發佈者</th>
    <th>回覆數</th>
      <% if current_user.present? && current_user %>
    <th>操作</th>
    <% else %>
    <th></th>
      <% end %>
  </tr>

  <% @articles.each do |a| %>
  <tr>
    <td>
        <%= link_to "#{a.topic}", article_path(a), :class => "btn btn-default btn-block" %>
    </td>
    <td>
      by: <%= a.user.display_name %>
    </td>
    <td><%= a.comments.size %></td>
    
    <td>
      <% if current_user.present? && current_user.id == a.user_id %>
    
        <div class="btn-group">
          <button type="button" class="btn btn-default"><%= link_to "內容與其他", article_path(a) %></button>
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu">
            
            <li><%= link_to "Edit Topic", edit_article_path(a), :class => "btn btn-info" %></li>
            <li><%= link_to "Delete Topic", article_path(a), :method => :delete, :data => { :confirm => "Are you sure?" }, :class => "btn btn-danger" %></li>
          </ul>
        </div>
      <% end %>
    </td>

  </tr>
  <% end %>
</table>

<p><%= paginate @articles %></p>